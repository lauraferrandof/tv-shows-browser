"use strict";const searchBarEl=document.querySelector(".search-bar__input"),submitBtnEl=document.querySelector(".submit-btn"),resultsListEl=document.querySelector(".results__list");let searchValue="";function handleSearchBtn(e){e.preventDefault(),fetchData()}function fetchData(){searchValue=searchBarEl.value,fetch("http://api.tvmaze.com/search/shows?q="+searchValue).then(e=>e.json()).then(e=>{let t="";for(let s=0;s<e.length;s++){const l=e[s].show.name,i=e[s].show.image,a=e[s].show.id;t+=i?`<li class="results__item results__item${[s+1]}" id="${a}"> <div class="item__image-container"> <img src="${i.medium}" alt="Show image" class="item__image"></div> <h2 class="item__title">${l}</h2></li>`:`<li class="results__item results__item${[s+1]}" id="${a}"> <div class="item__image-container"> <img src="https://via.placeholder.com/210x295/cccccc/666666/?text=TV" alt="Show image" class="item__image"></div> <h2 class="item__title">${l}</h2></li>`}resultsListEl.innerHTML=t,collectShowItems(),searchBarEl.value=""})}function collectShowItems(){const e=resultsListEl.querySelectorAll(".results__item");for(const t of e){t.addEventListener("click",handleFavoriteShow);const e=t.getAttribute("id"),s=localStorage.getItem(e);s&&s.includes(e)&&t.classList.add("results__item--favorite")}}function handleFavoriteShow(e){const t=e.currentTarget,s=t.getAttribute("id");t.classList.toggle("results__item--favorite"),t.classList.contains("results__item--favorite")?localStorage.setItem(s,s):t.classList.contains("results__item--favorite")||localStorage.removeItem(s)}submitBtnEl.addEventListener("click",handleSearchBtn);